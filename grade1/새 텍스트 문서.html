<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üéØ Ïó¨Îü¨Í∞ÄÏßÄ ÎçßÏÖàÏùÑ Ìï¥ Î≥ºÍπåÏöî</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans KR', 'Malgun Gothic', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            animation: backgroundShift 10s ease infinite;
        }

        @keyframes backgroundShift {
            0%, 100% { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
            50% { background: linear-gradient(135deg, #764ba2 0%, #f093fb 100%); }
        }

        h1 {
            color: white;
            font-size: 2.5em;
            margin-bottom: 30px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
            animation: titleBounce 2s ease infinite;
        }

        @keyframes titleBounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }

        /* Ïª®Ìä∏Î°§ Î≤ÑÌäº Ïä§ÌÉÄÏùº Í∞úÏÑ† */
        .controls {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 30px;
            justify-content: center;
        }

        .controls button {
            padding: 15px 35px;
            font-size: 1.3em;
            font-weight: bold;
            cursor: pointer;
            border: none;
            border-radius: 50px;
            background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);
            color: white;
            box-shadow: 0 6px 20px rgba(72, 187, 120, 0.4);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .controls button::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .controls button:hover::before {
            width: 300px;
            height: 300px;
        }

        .controls button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(72, 187, 120, 0.5);
        }

        .controls button:active {
            transform: translateY(-1px);
        }

        /* Î¨∏Ï†ú Ïª®ÌÖåÏù¥ÎÑà Ïä§ÌÉÄÏùº Í∞úÏÑ† */
        .problem-container {
            width: 90%;
            max-width: 950px;
            background: white;
            border-radius: 30px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15);
            padding: 40px;
            min-height: 500px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 25px;
            text-align: center;
            position: relative;
            animation: slideUp 0.5s ease;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Ïû•ÏãùÏö© ÏïÑÏù¥ÏΩò */
        .problem-container::before {
            content: '‚ú®';
            position: absolute;
            top: 20px;
            left: 20px;
            font-size: 2em;
            animation: sparkle 2s ease infinite;
        }

        .problem-container::after {
            content: 'üåü';
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 2em;
            animation: sparkle 2s ease infinite 0.5s;
        }

        @keyframes sparkle {
            0%, 100% { transform: scale(1) rotate(0deg); }
            50% { transform: scale(1.2) rotate(180deg); }
        }

        .problem-title {
            font-size: 2em;
            font-weight: bold;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 25px;
        }

        .equation {
            font-size: 3em;
            font-weight: bold;
            color: #2d3748;
            margin: 20px 0;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            animation: fadeIn 0.8s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.9); }
            to { opacity: 1; transform: scale(1); }
        }

        .answer-input {
            padding: 15px;
            font-size: 1.8em;
            width: 100px;
            text-align: center;
            border: 3px solid #cbd5e0;
            border-radius: 15px;
            transition: all 0.3s ease;
            background: #f7fafc;
        }

        .answer-input:focus {
            outline: none;
            border-color: #667eea;
            transform: scale(1.05);
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
            background: white;
        }

        /* Î≤ÑÌäº Ïä§ÌÉÄÏùº Í∞úÏÑ† */
        .check-button, .next-problem-button {
            padding: 12px 30px;
            font-size: 1.3em;
            font-weight: bold;
            color: white;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .check-button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .check-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
        }

        .next-problem-button {
            background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);
        }

        .next-problem-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(72, 187, 120, 0.4);
        }

        /* ÌîºÎìúÎ∞± Î©îÏãúÏßÄ Ïä§ÌÉÄÏùº Í∞úÏÑ† */
        .feedback {
            margin-top: 20px;
            padding: 15px 30px;
            font-size: 1.4em;
            font-weight: bold;
            border-radius: 15px;
            animation: feedbackPop 0.5s ease;
        }

        @keyframes feedbackPop {
            0% { transform: scale(0); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        .correct {
            background: linear-gradient(135deg, #c6f6d5, #9ae6b4);
            color: #22543d;
            border: 2px solid #48bb78;
        }

        .incorrect {
            background: linear-gradient(135deg, #fed7d7, #fc8181);
            color: #742a2a;
            border: 2px solid #f56565;
        }

        /* 1Îã®Í≥Ñ: Ïù¥Ïñ¥ÏÑ∏Í∏∞ Ïä§ÌÉÄÏùº Í∞úÏÑ† */
        .counting-problem {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 100%;
        }

        .bead-row {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            align-items: center;
            gap: 10px;
            margin: 30px 0;
            padding: 20px;
            background: linear-gradient(135deg, #f7fafc, #edf2f7);
            border-radius: 20px;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.06);
        }

        .bead {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            border: 3px solid #4a5568;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1.4em;
            font-weight: bold;
            transition: all 0.3s ease;
            position: relative;
        }

        .bead.white {
            background: linear-gradient(135deg, #ffffff, #f7fafc);
            color: #2d3748;
        }

        .bead.white.with-number {
            background: linear-gradient(135deg, #fef5e7, #fbbf24);
            border-color: #f59e0b;
            font-size: 1.6em;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .bead.black-filled {
            background: linear-gradient(135deg, #4a5568, #2d3748);
            color: white;
            border-color: #2d3748;
            animation: fillAnimation 0.3s ease;
        }

        @keyframes fillAnimation {
            from { transform: scale(0); }
            to { transform: scale(1); }
        }

        .bead.empty-black-placeholder {
            background: white;
            border: 3px dashed #cbd5e0;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .bead.empty-black-placeholder.next-clickable {
            border-color: #667eea;
            box-shadow: 0 0 15px rgba(102, 126, 234, 0.5);
            animation: nextGlow 1s ease infinite;
        }

        @keyframes nextGlow {
            0%, 100% { transform: scale(1); box-shadow: 0 0 15px rgba(102, 126, 234, 0.5); }
            50% { transform: scale(1.1); box-shadow: 0 0 25px rgba(102, 126, 234, 0.7); }
        }

        .bead.empty-black-placeholder:hover {
            background: #f7fafc;
            transform: scale(1.1);
        }

        /* 2Îã®Í≥Ñ: Ïàò Î∞∞Ïó¥Ìåê Ïä§ÌÉÄÏùº Í∞úÏÑ† */
        .ten-frame-container {
            display: flex;
            gap: 30px;
            justify-content: center;
            margin: 30px 0;
            flex-wrap: wrap;
        }

        .ten-frame {
            display: grid;
            grid-template-columns: repeat(5, 55px);
            grid-template-rows: repeat(2, 55px);
            border: 3px solid #4a5568;
            border-radius: 15px;
            background: linear-gradient(135deg, #f7fafc, #edf2f7);
            padding: 5px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .frame-cell {
            width: 55px;
            height: 55px;
            border: 2px solid #cbd5e0;
            border-radius: 10px;
            display: flex;
            justify-content: center;
            align-items: center;
            background: white;
            transition: all 0.3s ease;
        }

        .frame-cell.clickable {
            cursor: pointer;
        }

        .frame-cell.clickable:hover {
            background: #f7fafc;
            transform: scale(1.05);
        }

        .frame-cell.next-clickable {
            border-color: #667eea;
            box-shadow: 0 0 10px rgba(102, 126, 234, 0.5);
            animation: cellPulse 1s ease infinite;
        }

        @keyframes cellPulse {
            0%, 100% { box-shadow: 0 0 10px rgba(102, 126, 234, 0.5); }
            50% { box-shadow: 0 0 20px rgba(102, 126, 234, 0.8); }
        }

        .frame-cell .filled-circle {
            width: 45px;
            height: 45px;
            background: linear-gradient(135deg, #cbd5e0, #a0aec0);
            border-radius: 50%;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
            animation: circleAppear 0.3s ease;
        }

        @keyframes circleAppear {
            from { transform: scale(0); }
            to { transform: scale(1); }
        }

        .frame-cell .filled-triangle {
            width: 0;
            height: 0;
            border-left: 22px solid transparent;
            border-right: 22px solid transparent;
            border-bottom: 38px solid #f56565;
            animation: triangleAppear 0.3s ease;
            filter: drop-shadow(0 2px 3px rgba(0, 0, 0, 0.2));
        }

        @keyframes triangleAppear {
            from { transform: scale(0) rotate(0deg); }
            to { transform: scale(1) rotate(360deg); }
        }

        /* ÏÑ§Î™Ö ÌÖçÏä§Ìä∏ Ïä§ÌÉÄÏùº Í∞úÏÑ† */
        p {
            font-size: 1.3em;
            color: #4a5568;
            background: linear-gradient(135deg, #fef5e7, #fef3c7);
            padding: 15px 25px;
            border-radius: 15px;
            border: 2px solid #fbbf24;
            margin-top: 20px;
            font-weight: 500;
        }

        /* Î∞òÏùëÌòï ÎîîÏûêÏù∏ */
        @media (max-width: 768px) {
            h1 {
                font-size: 2em;
            }
            
            .controls {
                flex-direction: column;
                width: 100%;
            }
            
            .controls button {
                width: 100%;
                padding: 15px;
            }
            
            .problem-container {
                padding: 25px;
            }
            
            .equation {
                font-size: 2.2em;
            }
            
            .ten-frame {
                grid-template-columns: repeat(5, 45px);
                grid-template-rows: repeat(2, 45px);
            }
            
            .frame-cell {
                width: 45px;
                height: 45px;
            }
            
            .bead {
                width: 40px;
                height: 40px;
            }
        }

        /* Ï∂îÍ∞Ä Ïï†ÎãàÎ©îÏù¥ÏÖò Ìö®Í≥º */
        .shake {
            animation: shake 0.5s ease;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }
    </style>
</head>
<body>
    <h1>üéØ Ïó¨Îü¨Í∞ÄÏßÄ ÎçßÏÖàÏùÑ Ìï¥ Î≥ºÍπåÏöî</h1>

    <div class="controls">
        <button onclick="loadProblem(1)">üî¢ Î∞©Î≤ï 1. Ïù¥Ïñ¥ÏÑ∏Í∏∞</button>
        <button onclick="loadProblem(2)">üé® Î∞©Î≤ï 2. Îçî Í∑∏Î†§ Íµ¨ÌïòÍ∏∞</button>
    </div>

    <div class="problem-container">
        <div id="problem-content">
            <div style="font-size: 1.5em; color: #718096; margin: 50px 0;">
                <p style="background: none; border: none;">
                    üëÜ ÏúÑ Î≤ÑÌäºÏùÑ ÎàåÎü¨ ÎçßÏÖà Î¨∏Ï†úÎ•º ÏãúÏûëÌï¥ Î≥¥ÏÑ∏Ïöî!<br>
                    <span style="font-size: 0.9em;">Îëê Í∞ÄÏßÄ Î∞©Î≤ïÏúºÎ°ú ÎçßÏÖàÏùÑ Ïó∞ÏäµÌï† Ïàò ÏûàÏñ¥Ïöî.</span>
                </p>
            </div>
        </div>
    </div>

    <script>
        let currentProblem = {};
        let currentStage = 0;
        let placedBlackBeads = 0;
        let placedTriangles = 0;
        let tenFrameCells = [];

        // 10ÏùÑ Ï¥àÍ≥ºÌïòÍ≥† 18 Ïù¥ÌïòÏùò Ìï©ÏùÑ Í∞ñÎäî ÎûúÎç§ ÎçßÏÖàÏãù ÏÉùÏÑ±
        function generateAdditionProblem() {
            let num1, num2, sum;
            do {
                num1 = Math.floor(Math.random() * 8) + 2; // 2 ~ 9
                num2 = Math.floor(Math.random() * 8) + 2; // 2 ~ 9
                sum = num1 + num2;
            } while (sum <= 10 || sum > 18);

            return { num1, num2, sum };
        }

        // Î¨∏Ï†ú Î°úÎìú Î∞è UI ÏóÖÎç∞Ïù¥Ìä∏
        function loadProblem(stage) {
            currentStage = stage;
            currentProblem = generateAdditionProblem();
            const problemContent = document.getElementById('problem-content');
            problemContent.innerHTML = '';
            problemContent.style.animation = 'slideUp 0.5s ease';
            
            placedBlackBeads = 0;
            placedTriangles = 0;
            tenFrameCells = [];

            const problemTitle = document.createElement('div');
            problemTitle.className = 'problem-title';
            problemTitle.innerHTML = `${getStageName(stage)}<br><span style="font-size: 0.8em;">(${currentProblem.num1} + ${currentProblem.num2} = ?)</span>`;
            problemContent.appendChild(problemTitle);

            const equationDisplay = document.createElement('div');
            equationDisplay.className = 'equation';
            equationDisplay.innerHTML = `${currentProblem.num1} + ${currentProblem.num2} = <input type="number" id="answer-input" class="answer-input" min="0" max="18" placeholder="?">`;
            problemContent.appendChild(equationDisplay);

            const buttonContainer = document.createElement('div');
            buttonContainer.style.display = 'flex';
            buttonContainer.style.gap = '10px';
            buttonContainer.style.justifyContent = 'center';
            buttonContainer.style.flexWrap = 'wrap';
            problemContent.appendChild(buttonContainer);

            const checkButton = document.createElement('button');
            checkButton.className = 'check-button';
            checkButton.innerHTML = '‚úÖ Ï†ïÎãµ ÌôïÏù∏';
            checkButton.onclick = checkAnswer;
            buttonContainer.appendChild(checkButton);

            const nextProblemButton = document.createElement('button');
            nextProblemButton.id = 'next-problem-button';
            nextProblemButton.className = 'next-problem-button';
            nextProblemButton.innerHTML = '‚û°Ô∏è Îã§Ïùå Î¨∏Ï†ú';
            nextProblemButton.style.display = 'none';
            nextProblemButton.onclick = () => loadProblem(currentStage);
            buttonContainer.appendChild(nextProblemButton);

            const feedbackDiv = document.createElement('div');
            feedbackDiv.id = 'feedback';
            feedbackDiv.className = 'feedback';
            feedbackDiv.style.display = 'none';
            problemContent.appendChild(feedbackDiv);

            renderStageContent(stage);

            // Îãµ ÏûÖÎ†•ÎûÄÏóê Ìè¨Ïª§Ïä§
            setTimeout(() => {
                document.getElementById('answer-input').focus();
            }, 100);
        }

        function getStageName(stage) {
            switch (stage) {
                case 1: return 'üî¢ Î∞©Î≤ï 1. Ïù¥Ïñ¥ÏÑ∏Í∏∞';
                case 2: return 'üé® Î∞©Î≤ï 2. Îçî Í∑∏Î†§ Íµ¨ÌïòÍ∏∞';
                default: return '';
            }
        }

        function renderStageContent(stage) {
            const problemContent = document.getElementById('problem-content');
            const visualContent = document.createElement('div');
            visualContent.id = 'visual-content';
            problemContent.appendChild(visualContent);

            switch (stage) {
                case 1:
                    renderCountingProblem(visualContent);
                    break;
                case 2:
                    renderTenFrameProblem(visualContent);
                    break;
            }
        }

        function checkAnswer() {
            const answerInput = document.getElementById('answer-input');
            const feedbackDiv = document.getElementById('feedback');
            const nextProblemButton = document.getElementById('next-problem-button');
            const userAnswer = parseInt(answerInput.value, 10);

            feedbackDiv.style.display = 'block';

            if (isNaN(userAnswer)) {
                feedbackDiv.textContent = 'ü§î Ïà´ÏûêÎ•º ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî.';
                feedbackDiv.className = 'feedback incorrect shake';
                nextProblemButton.style.display = 'none';
                answerInput.focus();
                return;
            }

            if (userAnswer === currentProblem.sum) {
                feedbackDiv.innerHTML = 'üéâ Ï†ïÎãµÏûÖÎãàÎã§! ÌõåÎ•≠Ìï¥Ïöî! üëè';
                feedbackDiv.className = 'feedback correct';
                nextProblemButton.style.display = 'inline-block';
                answerInput.disabled = true;
                
                // Ï∂ïÌïò Ìö®Í≥º
                createConfetti();
            } else {
                feedbackDiv.innerHTML = `üí™ ÏïÑÏâ¨ÏõåÏöî! Îã§Ïãú ÌïúÎ≤à ÏÉùÍ∞ÅÌï¥Î≥¥ÏÑ∏Ïöî.`;
                feedbackDiv.className = 'feedback incorrect shake';
                nextProblemButton.style.display = 'none';
                answerInput.select();
            }
        }

        // Ï∂ïÌïò Ìö®Í≥º Ìï®Ïàò
        function createConfetti() {
            // Í∞ÑÎã®Ìïú Ï∂ïÌïò Ìö®Í≥º (ÏÑ†ÌÉùÏÇ¨Ìï≠)
            const colors = ['üéà', 'üéâ', 'üéä', '‚≠ê', '‚ú®'];
            for (let i = 0; i < 5; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.style.position = 'fixed';
                    confetti.style.fontSize = '2em';
                    confetti.style.left = Math.random() * 100 + '%';
                    confetti.style.top = '-50px';
                    confetti.style.zIndex = '9999';
                    confetti.textContent = colors[Math.floor(Math.random() * colors.length)];
                    confetti.style.animation = 'fall 3s ease-out forwards';
                    document.body.appendChild(confetti);
                    setTimeout(() => confetti.remove(), 3000);
                }, i * 100);
            }
        }

        // Îñ®Ïñ¥ÏßÄÎäî Ïï†ÎãàÎ©îÏù¥ÏÖò Ï∂îÍ∞Ä
        const style = document.createElement('style');
        style.textContent = `
            @keyframes fall {
                to {
                    transform: translateY(calc(100vh + 100px)) rotate(360deg);
                    opacity: 0;
                }
            }
        `;
        document.head.appendChild(style);

        // 1Îã®Í≥Ñ: Ïù¥Ïñ¥ÏÑ∏Í∏∞ Íµ¨ÌòÑ
        function renderCountingProblem(container) {
            const { num1, num2 } = currentProblem;

            const countingDiv = document.createElement('div');
            countingDiv.className = 'counting-problem';
            container.appendChild(countingDiv);

            const beadRowContainer = document.createElement('div');
            beadRowContainer.className = 'bead-row';
            countingDiv.appendChild(beadRowContainer);

            const blackBeadPlaceholders = [];

            // num1Ïùò Í∞úÏàòÎßåÌÅº ÌïòÏñÄÏÉâ Î∞îÎëëÎèå ÏÉùÏÑ±
            for (let i = 0; i < num1; i++) {
                const bead = document.createElement('div');
                bead.className = 'bead white';
                if (i === num1 - 1) {
                    bead.classList.add('with-number');
                    bead.textContent = num1;
                }
                beadRowContainer.appendChild(bead);
            }

            // num2Í∞úÏùò Í≤ÄÏùÄÏÉâ Îπà Î∞ïÏä§
            for (let i = 0; i < num2; i++) {
                const emptyBeadBox = document.createElement('div');
                emptyBeadBox.className = 'bead empty-black-placeholder';
                emptyBeadBox.dataset.index = i;
                emptyBeadBox.onclick = function() {
                    const clickedIndex = parseInt(this.dataset.index, 10);

                    if (clickedIndex === placedBlackBeads && placedBlackBeads < num2) {
                        this.classList.remove('empty-black-placeholder');
                        this.classList.remove('next-clickable');
                        this.classList.add('black-filled');
                        this.textContent = num1 + placedBlackBeads + 1;
                        this.style.cursor = 'default';
                        placedBlackBeads++;

                        if (placedBlackBeads < num2) {
                            blackBeadPlaceholders[placedBlackBeads].classList.add('next-clickable');
                        }
                    }
                };
                beadRowContainer.appendChild(emptyBeadBox);
                blackBeadPlaceholders.push(emptyBeadBox);
            }

            if (num2 > 0) {
                blackBeadPlaceholders[0].classList.add('next-clickable');
            }

            const instruction = document.createElement('p');
            instruction.innerHTML = `üí° Í≤ÄÏùÄÏÉâ Îπà Ïπ∏ÏùÑ ÏàúÏÑúÎåÄÎ°ú ÌÅ¥Î¶≠ÌïòÏó¨<br>${num1}Î∂ÄÌÑ∞ Ïù¥Ïñ¥ ÏÑ∏Ïñ¥ Î≥¥ÏÑ∏Ïöî!`;
            countingDiv.appendChild(instruction);
        }

        // 2Îã®Í≥Ñ: Ïàò Î∞∞Ïó¥Ìåê ÏÇ¨Ïö©ÌïòÍ∏∞ Íµ¨ÌòÑ
        function renderTenFrameProblem(container) {
            const { num1, num2 } = currentProblem;

            const tenFrameDiv = document.createElement('div');
            tenFrameDiv.className = 'ten-frame-container';
            container.appendChild(tenFrameDiv);

            const frame1 = document.createElement('div');
            frame1.className = 'ten-frame';
            tenFrameDiv.appendChild(frame1);

            const frame2 = document.createElement('div');
            frame2.className = 'ten-frame';
            tenFrameDiv.appendChild(frame2);

            let totalTrianglesToPlace = num2;
            let clickableCells = [];

            // Ï≤´ Î≤àÏß∏ Î∞∞Ïó¥Ìåê Ï±ÑÏö∞Í∏∞
            for (let i = 0; i < 10; i++) {
                const cell = document.createElement('div');
                cell.className = 'frame-cell';
                if (i < num1) {
                    const circle = document.createElement('div');
                    circle.className = 'filled-circle';
                    cell.appendChild(circle);
                } else {
                    cell.classList.add('clickable');
                    clickableCells.push(cell);
                }
                frame1.appendChild(cell);
                tenFrameCells.push(cell);
            }

            // Îëê Î≤àÏß∏ Î∞∞Ïó¥Ìåê
            for (let i = 0; i < 10; i++) {
                const cell = document.createElement('div');
                cell.className = 'frame-cell clickable';
                clickableCells.push(cell);
                frame2.appendChild(cell);
                tenFrameCells.push(cell);
            }

            // ÌÅ¥Î¶≠ Ïù¥Î≤§Ìä∏ Ìï∏Îì§Îü¨
            clickableCells.forEach((cell, index) => {
                cell.onclick = function() {
                    if (index === placedTriangles && placedTriangles < totalTrianglesToPlace && !this.querySelector('.filled-triangle')) {
                        const triangle = document.createElement('div');
                        triangle.className = 'filled-triangle';
                        this.appendChild(triangle);
                        this.classList.remove('clickable');
                        this.classList.remove('next-clickable');
                        this.style.cursor = 'default';
                        placedTriangles++;

                        if (placedTriangles < totalTrianglesToPlace) {
                            clickableCells[placedTriangles].classList.add('next-clickable');
                        }
                    }
                };
            });

            if (totalTrianglesToPlace > 0) {
                clickableCells[0].classList.add('next-clickable');
            }

            const instruction = document.createElement('p');
            instruction.innerHTML = `üîµ ÌöåÏÉâ ÎèôÍ∑∏ÎùºÎØ∏Îäî ${num1}Í∞ú ÏûàÏäµÎãàÎã§.<br>üî∫ Îπà Ïπ∏ÏùÑ ÌÅ¥Î¶≠ÌïòÏó¨ Îπ®Í∞Ñ ÏÑ∏Î™®Î•º ${num2}Í∞ú Ï±ÑÏõåÎ≥¥ÏÑ∏Ïöî!`;
            tenFrameDiv.appendChild(instruction);
        }

        // Enter ÌÇ§Î°ú Ï†ïÎãµ ÌôïÏù∏
        document.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                const answerInput = document.getElementById('answer-input');
                if (answerInput && document.activeElement === answerInput) {
                    checkAnswer();
                }
            }
        });
    </script>
</body>
</html>
